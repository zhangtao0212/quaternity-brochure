"use strict";(()=>{var e={};e.id=925,e.ids=[925],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6005:e=>{e.exports=require("node:crypto")},5075:(e,s,r)=>{r.r(s),r.d(s,{originalPathname:()=>x,patchFetch:()=>h,requestAsyncStorage:()=>b,routeModule:()=>l,serverHooks:()=>v,staticGenerationAsyncStorage:()=>m});var t={};r.r(t),r.d(t,{GET:()=>d,POST:()=>p});var o=r(9303),a=r(8716),i=r(670),n=r(7070),u=r(1970);let c=process.env.DOMAIN||"qosmos.one";async function p(e){try{let{email:s}=await e.json();if(!s||!s.includes("@"))return n.NextResponse.json({error:"Invalid email address"},{status:400});let r=new Date().toISOString(),t=`subscriber:${s.toLowerCase()}`;await u.kv.hset(t,{email:s,timestamp:r,source:"website",domain:c}),await u.kv.sadd("subscribers:emails",s.toLowerCase());let o=r.split("T")[0];return await u.kv.sadd(`subscribers:today:${o}`,s.toLowerCase()),await u.kv.set("subscribers:lastUpdate",r),console.log(`âœ… New subscriber: ${s}`),n.NextResponse.json({message:"Successfully subscribed!"},{status:200})}catch(e){return console.error("Subscription error:",e),n.NextResponse.json({error:"Failed to process subscription"},{status:500})}}async function d(){try{let e=(await u.kv.smembers("subscribers:emails")).length||0;return n.NextResponse.json({count:e,domain:c},{status:200})}catch{return n.NextResponse.json({error:"Failed to fetch stats"},{status:500})}}process.env.REPORT_EMAIL;let l=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/subscribe/route",pathname:"/api/subscribe",filename:"route",bundlePath:"app/api/subscribe/route"},resolvedPagePath:"/Users/todd/Library/Mobile Documents/com~apple~CloudDocs/Personal/code/quaternity-brochure/app/api/subscribe/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:b,staticGenerationAsyncStorage:m,serverHooks:v}=l,x="/api/subscribe/route";function h(){return(0,i.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:m})}}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[948,681],()=>r(5075));module.exports=t})();